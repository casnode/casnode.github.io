"use strict";(self.webpackChunkcasnode_website=self.webpackChunkcasnode_website||[]).push([[300],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return m}});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=r.createContext({}),s=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=s(e.components);return r.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},p=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,u=c(e,["components","mdxType","originalType","parentName"]),p=s(n),m=o,f=p["".concat(l,".").concat(m)]||p[m]||d[m]||a;return n?r.createElement(f,i(i({ref:t},u),{},{components:n})):r.createElement(f,i({ref:t},u))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=p;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c.mdxType="string"==typeof e?e:o,i[1]=c;for(var s=2;s<a;s++)i[s]=n[s];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}p.displayName="MDXCreateElement"},7955:function(e,t,n){n.r(t),n.d(t,{assets:function(){return l},contentTitle:function(){return i},default:function(){return d},frontMatter:function(){return a},metadata:function(){return c},toc:function(){return s}});var r=n(3117),o=(n(7294),n(3905));const a={},i=void 0,c={unversionedId:"docker",id:"docker",title:"docker",description:"Installer casnode via docker",source:"@site/i18n/fr/docusaurus-plugin-content-docs/current/docker.md",sourceDirName:".",slug:"/docker",permalink:"/fr/docs/docker",draft:!1,editUrl:"https://github.com/casnode/casnode-website/tree/master/docs/docker.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"bt-panel",permalink:"/fr/docs/bt-panel"},next:{title:"Migration depuis DiscuzX",permalink:"/fr/docs/migration"}},l={},s=[{value:"Installer casnode via docker",id:"installer-casnode-via-docker",level:2},{value:"Pr\xe9paration du travail",id:"pr\xe9paration-du-travail",level:3},{value:"Installer docker et docker-compose",id:"installer-docker-et-docker-compose",level:4},{value:"Cloner la casnode &amp; casdoor",id:"cloner-la-casnode--casdoor",level:4},{value:"Configurer la casdoor",id:"configurer-la-casdoor",level:3},{value:"Courir la cassette",id:"courir-la-cassette",level:4},{value:"Configurer casnode dans casdoor",id:"configurer-casnode-dans-casdoor",level:4},{value:"Configurer la casnode",id:"configurer-la-casnode",level:3}],u={toc:s};function d(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,r.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("admonition",{title:"L'environnement du tutoriel est Ubuntu 20.0.4 .  ",type:"caution"}),(0,o.kt)("h2",{id:"installer-casnode-via-docker"},"Installer casnode via docker"),(0,o.kt)("h3",{id:"pr\xe9paration-du-travail"},"Pr\xe9paration du travail"),(0,o.kt)("h4",{id:"installer-docker-et-docker-compose"},"Installer docker et docker-compose"),(0,o.kt)("p",null,"Installez Docker et Docker-compose, vous voyez ",(0,o.kt)("a",{parentName:"p",href:"https://docs.docker.com/get-docker/"},"docker")," et ",(0,o.kt)("a",{parentName:"p",href:"https://docs.docker.com/compose/install/"},"docker-compose")),(0,o.kt)("br",null),(0,o.kt)("h4",{id:"cloner-la-casnode--casdoor"},"Cloner la casnode & casdoor"),(0,o.kt)("p",null,"Ensuite, cloner Casdoor et Casndoe de GitHub."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"git clone https://github.com/casbin/casdoor.git\ngit clone https://github.com/casbin/casnode.git\n")),(0,o.kt)("p",null,"Now, you can see two folders, ",(0,o.kt)("inlineCode",{parentName:"p"},"casnode")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"casdoor"),"."),(0,o.kt)("br",null),(0,o.kt)("h3",{id:"configurer-la-casdoor"},"Configurer la casdoor"),(0,o.kt)("h4",{id:"courir-la-cassette"},"Courir la cassette"),(0,o.kt)("p",null,"Nous configurons d'abord la casdoor."),(0,o.kt)("p",null,"Edit ",(0,o.kt)("inlineCode",{parentName:"p"},"conf/app.conf"),", modify ",(0,o.kt)("strong",{parentName:"p"},"dataSourceName = root:123@tcp(localhost:3306)/ to dataSourceName = root:123@tcp(db:3306)/")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"docker-compose up\n")),(0,o.kt)("br",null),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"mysql et casdoor sont dans diff\xe9rents docker containers.")),(0,o.kt)("h4",{id:"configurer-casnode-dans-casdoor"},"Configurer casnode dans casdoor"),(0,o.kt)("p",null,"Maintenant que Casdoor a \xe9t\xe9 configur\xe9, visitez http://your-ip:8000 pour configurer Casnode."),(0,o.kt)("p",null,"Le compte de connexion administrateur par d\xe9faut est ",(0,o.kt)("inlineCode",{parentName:"p"},"admin/123"),"."),(0,o.kt)("p",null,"Cliquez sur Organisation, puis sur Ajouter, cliquez sur Modifier pour l'organisation ajout\xe9e, et changez le nom de l'organisation que vous voulez. Ici, je l'ai r\xe9gl\xe9 sur casbin-forum, puis cliquez sur Enregistrer."),(0,o.kt)("p",null,"Cliquez sur Applications, puis cliquez sur Ajouter, pour l'application que vous venez d'ajouter, cliquez sur Modifier, changer le nom de l'application en nom que vous voulez, je l'ai chang\xe9 en app-casbin-forum. cliquez sur l'organisation, s\xe9lectionnez l'organisation que vous venez d'ajouter, mon organisation est casbin- forum. Cliquez sur les URL de redirection, modifiez le lien dans la bo\xeete pour ",(0,o.kt)("inlineCode",{parentName:"p"},"http://votre-ip:7000/callback"),". Enfin, souvenez-vous de l'ID du client et du secret du client, puis cliquez sur Enregistrer."),(0,o.kt)("p",null,"Cliquez sur Utilisateurs, sur Ajouter, puis sur Modifier, modifier l'utilisateur ajout\xe9, cliquez sur Organisation, s\xe9lectionnez le forum de casse et cliquez sur Administrateur. Enfin, cliquez sur Enregistrer, maintenant que votre organisation a un compte administrateur."),(0,o.kt)("br",null),(0,o.kt)("h3",{id:"configurer-la-casnode"},"Configurer la casnode"),(0,o.kt)("p",null,"Ensuite, nous configurons dans Casnode."),(0,o.kt)("p",null,"Edit ",(0,o.kt)("inlineCode",{parentName:"p"},"conf/app.conf"),", modify ",(0,o.kt)("strong",{parentName:"p"},"dataSourceName = root:123@tcp(localhost:3306)/")," to ",(0,o.kt)("strong",{parentName:"p"},"dataSourceName = root:123@tcp(db:3306)/")," so that the data come from your database."),(0,o.kt)("p",null,"Then find ",(0,o.kt)("inlineCode",{parentName:"p"},"casdoorEndpoint"),", modify it to ",(0,o.kt)("inlineCode",{parentName:"p"},"http://your-ip:8000")," (Casdoor backend address), find ",(0,o.kt)("inlineCode",{parentName:"p"},"clientId")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"clientSecret"),", and modify them to the previously remembered Application client id and client secret, find casdoorOrganization, modify the organization name to you set."),(0,o.kt)("p",null,"Edit ",(0,o.kt)("inlineCode",{parentName:"p"},"web/src/Conf.js")," , modify ",(0,o.kt)("inlineCode",{parentName:"p"},"serverUrl")," to http://your-ip:8000 (Casdoor front-end access address), modify ",(0,o.kt)("inlineCode",{parentName:"p"},"clientId")," to the clientId of the application just added, modify ",(0,o.kt)("inlineCode",{parentName:"p"},"appName")," to the set application name, and modify ",(0,o.kt)("inlineCode",{parentName:"p"},"organizationName")," to the set organization name."),(0,o.kt)("p",null,"Next, run casnode with docker"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"docker-compose vers le haut\n")),(0,o.kt)("p",null,"Next visit http://your-ip:7000, click login, enter the account you added before, user_1/123, you have now successfully logged in to Casnode."),(0,o.kt)("p",null,"More settings reference ",(0,o.kt)("a",{parentName:"p",href:"https://casnode.org/docs"},"casnode.")))}d.isMDXComponent=!0}}]);