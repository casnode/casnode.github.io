"use strict";(self.webpackChunkcasnode_website=self.webpackChunkcasnode_website||[]).push([[575],{3905:function(e,n,t){t.d(n,{Zo:function(){return p},kt:function(){return m}});var a=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var l=a.createContext({}),u=function(e){var n=a.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},p=function(e){var n=u(e.components);return a.createElement(l.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},c=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),c=u(t),m=r,v=c["".concat(l,".").concat(m)]||c[m]||d[m]||i;return t?a.createElement(v,o(o({ref:n},p),{},{components:t})):a.createElement(v,o({ref:n},p))}));function m(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var i=t.length,o=new Array(i);o[0]=c;var s={};for(var l in n)hasOwnProperty.call(n,l)&&(s[l]=n[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,o[1]=s;for(var u=2;u<i;u++)o[u]=t[u];return a.createElement.apply(null,o)}return a.createElement.apply(null,t)}c.displayName="MDXCreateElement"},1095:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return s},contentTitle:function(){return l},metadata:function(){return u},toc:function(){return p},default:function(){return c}});var a=t(7462),r=t(3366),i=(t(7294),t(3905)),o=["components"],s={},l=void 0,u={unversionedId:"bt-panel",id:"bt-panel",isDocsHomePage:!1,title:"bt-panel",description:"Installer Casnode sous le panneau BT Linux",source:"@site/i18n/fr/docusaurus-plugin-content-docs/current/bt-panel.md",sourceDirName:".",slug:"/bt-panel",permalink:"/fr/docs/bt-panel",editUrl:"https://github.com/casnode/casnode-website/tree/master/docs/bt-panel.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Installation",permalink:"/fr/docs/installation"},next:{title:"docker",permalink:"/fr/docs/docker"}},p=[{value:"Installer Casnode sous le panneau BT Linux",id:"installer-casnode-sous-le-panneau-bt-linux",children:[{value:"Pr\xe9paration du travail",id:"pr\xe9paration-du-travail",children:[],level:3}],level:2}],d={toc:p};function c(e){var n=e.components,t=(0,r.Z)(e,o);return(0,i.kt)("wrapper",(0,a.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"L'environnement du tutoriel est Ubuntu 20.04  ")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"})),(0,i.kt)("h2",{id:"installer-casnode-sous-le-panneau-bt-linux"},"Installer Casnode sous le panneau BT Linux"),(0,i.kt)("h3",{id:"pr\xe9paration-du-travail"},"Pr\xe9paration du travail"),(0,i.kt)("p",null,"Apr\xe8s avoir install\xe9 le panneau BT, le navigateur visite le panneau BT, s\xe9lectionne le magasin de logiciels, recherche et installe MySQL, puis recherche un noeud, vous pouvez voir qu'il y a un gestionnaire PM2, installez le gestionnaire PM2."),(0,i.kt)("p",null,"Une fois l'installation termin\xe9e, d\xe9connectez-vous du serveur ou red\xe9marrez le serveur, le noeud sera automatiquement \xe9crit dans la variable d'environnement."),(0,i.kt)("p",null,"Entrez ",(0,i.kt)("inlineCode",{parentName:"p"},"git --version")," pour vous assurer que git est bien , si la commande d'invite de commande ",(0,i.kt)("inlineCode",{parentName:"p"},"git")," est introuvable, utilisez ",(0,i.kt)("inlineCode",{parentName:"p"},"apt-get install git")," pour installer git."),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Pour acc\xe9der au Casnode avec succ\xe8s, vous devez ouvrir le port ",(0,i.kt)("strong",{parentName:"h5"},"7001")," et ",(0,i.kt)("strong",{parentName:"h5"},"8000"),". :::")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("h4",{parentName:"div",id:"install-golang"},"Install Golang"),(0,i.kt)("p",{parentName:"div"},"L'utilisateur root ex\xe9cute les commandes suivantes pour t\xe9l\xe9charger et d\xe9compresser le fichier binaire Go dans le r\xe9pertoire ",(0,i.kt)("strong",{parentName:"p"},"/usr/local"),"."),(0,i.kt)("pre",{parentName:"div"},(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"wget -c https://dl.google.com/go/go1.16.5.linux-amd64.tar.gz -O - | sudo tar -xz -C /usr/local\n")),(0,i.kt)("p",{parentName:"div"},"Ensuite, nous devons ajouter Golang aux variables d'environnement, ",(0,i.kt)("inlineCode",{parentName:"p"},"sudo vim /etc/profile"),", Entrez ",(0,i.kt)("inlineCode",{parentName:"p"},"i"),", ajoutez le code suivant \xe0 la derni\xe8re ligne du fichier."),(0,i.kt)("pre",{parentName:"div"},(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"export GOROOT=/usr/local/go\nexport PATH=$PATH:$GOROOT/bin\n")),(0,i.kt)("p",{parentName:"div"},"Appuyez sur ",(0,i.kt)("inlineCode",{parentName:"p"},"\xc9chap")," et entrez ",(0,i.kt)("inlineCode",{parentName:"p"},":wq")," pour enregistrer le fichier et quitter."),(0,i.kt)("p",{parentName:"div"},"Ensuite, utilisez la commande ",(0,i.kt)("inlineCode",{parentName:"p"},"source /etc/profile")," pour faire fonctionner les nouvelles variables d'environnement."),(0,i.kt)("p",{parentName:"div"},"Maintenant, entrez la version ",(0,i.kt)("inlineCode",{parentName:"p"},"go"),", vous verrez la version go et nous l'avons install\xe9e avec succ\xe8s. Si vous ne pouvez pas vous connecter \xe0 GitHub, vous pouvez configurer le miroir. La commande est"),(0,i.kt)("pre",{parentName:"div"},(0,i.kt)("code",{parentName:"pre",className:"language-go"},"go env -w GOPROXY=https://goproxy.cn,direct\n")),(0,i.kt)("h4",{parentName:"div",id:"git-clone-casnode--casdoor"},"Git clone Casnode & Casdoor"),(0,i.kt)("p",{parentName:"div"},"Ensuite, ex\xe9cutez les commandes suivantes dans le dossier o\xf9 vous voulez stocker le projet."),(0,i.kt)("pre",{parentName:"div"},(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"git clone https://github.com/casbin/casdoor.git\ngit clone https://github.com/casbin/casnode.git\n")),(0,i.kt)("p",{parentName:"div"},"Maintenant, vous pouvez voir il ya deux dossiers, Casnode et Casdoor."),(0,i.kt)("br",null),(0,i.kt)("h3",{parentName:"div",id:"configurer-casdoor"},"Configurer Casdoor"),(0,i.kt)("h4",{parentName:"div",id:"lancer-casdoor"},"Lancer Casdoor"),(0,i.kt)("p",{parentName:"div"},"Nous configurons d'abord Casdoor."),(0,i.kt)("pre",{parentName:"div"},(0,i.kt)("code",{parentName:"pre",className:"language-go"},"cd casdoor\nallez construire main.go\nvim conf/app.conf\n")),(0,i.kt)("p",{parentName:"div"},"Entrez ",(0,i.kt)("inlineCode",{parentName:"p"},"i"),", trouver"),(0,i.kt)("pre",{parentName:"div"},(0,i.kt)("code",{parentName:"pre"},"dataSourceName = root:123@tcp(localhost:3306)/\n")),(0,i.kt)("p",{parentName:"div"},"Changer le mot de passe de MySQL fourni par le panneau BT comme ",(0,i.kt)("strong",{parentName:"p"},"123"),", puis appuyez sur ",(0,i.kt)("inlineCode",{parentName:"p"},"Esc"),", entrez ",(0,i.kt)("inlineCode",{parentName:"p"},":wq")," pour enregistrer et quitter."),(0,i.kt)("pre",{parentName:"div"},(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"web cd\nnpm install\nnpm run build\ncd ..\nsudo nohup ./main &\n")),(0,i.kt)("h4",{parentName:"div",id:"configurer-casnode-dans-casdoor"},"Configurer Casnode dans Casdoor"),(0,i.kt)("p",{parentName:"div"},"Maintenant que Casdoor a \xe9t\xe9 configur\xe9, visitez http://your-ip:8000 pour configurer Casnode."),(0,i.kt)("p",{parentName:"div"},"Le compte de connexion administrateur par d\xe9faut est admin/123."),(0,i.kt)("p",{parentName:"div"},"Cliquez sur Organisation, puis sur Ajouter, cliquez sur Modifier pour l'organisation ajout\xe9e, et changez le nom de l'organisation que vous voulez. Ici, je l'ai r\xe9gl\xe9 sur casbin-forum, puis cliquez sur Enregistrer."),(0,i.kt)("p",{parentName:"div"},"Cliquez sur Applications, puis cliquez sur Ajouter, pour l'application que vous venez d'ajouter, cliquez sur Modifier, changer le nom de l'application en nom que vous voulez, je l'ai chang\xe9 en app-casbin-forum. Cliquez sur l'organisation, s\xe9lectionnez l'organisation que vous venez d'ajouter, mon organisation est casbin- forum. Cliquez sur les URL de redirection, modifiez le lien dans la bo\xeete vers http://votre-ip:7000/callback.Enfin, souvenez-vous de l'ID du client et du secret du client, puis cliquez sur Enregistrer."),(0,i.kt)("p",{parentName:"div"},"Cliquez sur Utilisateurs, sur Ajouter, puis sur Modifier, modifier l'utilisateur ajout\xe9, cliquez sur Organisation, s\xe9lectionnez le forum de casse et cliquez sur Administrateur. Enfin, cliquez sur Enregistrer, maintenant que votre organisation a un compte administrateur."),(0,i.kt)("br",null),(0,i.kt)("h3",{parentName:"div",id:"configurer-casnode"},"Configurer Casnode"),(0,i.kt)("p",{parentName:"div"},"Ensuite, nous configurons dans Casnode."),(0,i.kt)("pre",{parentName:"div"},(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"sudo su\ncd casnode\nallez construire main.go\nvim conf/app.conf\n")),(0,i.kt)("p",{parentName:"div"},"Entrez ",(0,i.kt)("inlineCode",{parentName:"p"},"i")," et trouvez"),(0,i.kt)("pre",{parentName:"div"},(0,i.kt)("code",{parentName:"pre"},"dataSourceName = root:123@tcp(localhost:3306)/\n")),(0,i.kt)("p",{parentName:"div"},"Changer le mot de passe MySQL fourni par le panneau BT en ",(0,i.kt)("strong",{parentName:"p"},"123"),", puis trouver casdoorEndpoint, le modifier sur http://your-ip:8000 (adresse backend de Casdoor), trouver ",(0,i.kt)("strong",{parentName:"p"},"ClientId")," et ",(0,i.kt)("strong",{parentName:"p"},"ClientSecret"),", et les modifier \xe0 l'identifiant du client d'application et au secret client pr\xe9c\xe9demment m\xe9moris\xe9, trouver casdoorOrganization, modifier le nom de l'organisation dans votre ensemble. Enregistrer et quitter."),(0,i.kt)("pre",{parentName:"div"},(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"cd web\nvim src/Conf.js\n")),(0,i.kt)("p",{parentName:"div"},"Modifier l'URL du serveur \xe0 http://your-ip:8000 (adresse d'acc\xe8s front-end de Casdoor), modifier le ClientId au ClientId de l'application vient d'ajouter, modifier le nom de l'application et modifier l'organisation pour le nom de l'organisation d\xe9finie. Enregistrer et quitter."),(0,i.kt)("pre",{parentName:"div"},(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"npm install\nnpm run build\ncd ..\nnohup ./main &\n")),(0,i.kt)("p",{parentName:"div"},"Prochaine visite ",(0,i.kt)("strong",{parentName:"p"},"http://your-ip:7000"),", cliquez sur login, entrez le compte que vous avez ajout\xe9 avant, user_1/123, vous \xeates maintenant connect\xe9 avec succ\xe8s \xe0 Casnode."),(0,i.kt)("p",{parentName:"div"},"Pour plus de param\xe8tres, veuillez consulter ",(0,i.kt)("a",{parentName:"p",href:"https://casnode.org/docs"},"Casnode.")))))}c.isMDXComponent=!0}}]);